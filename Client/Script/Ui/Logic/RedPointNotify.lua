Ui.tbRedPointSetting = {
  BtnTopFold = {
    ItemBoxTop = {"ItemBox"},
    Calendar = {
      Calendar_Daily = {
        RankBattle = {
          "RankBattle_FetchAward"
        }
      },
      Calendar_TimeLimit = {},
      Calendar_EverydayTarget = {}
    },
    Activity_Login = {},
    Activity = {
      Activity_SignInAwards = {"Act_Sign"},
      Activity_GrowInvest = {},
      Activity_MoneyTreePanel = {
        "MoneyTree_Free"
      },
      Activity_OnHook = {
        "OnHook_GetExp"
      },
      Activity_RechargeGift = {"MonthCarad", "WeekCard"},
      Activity_DailyRechargeGift = {
        "DailyRechargeGift7"
      },
      "Activity_SupplementPanel",
      "Activity_SummerGift",
      "Activity_NewYearBuyGift",
      "Activity_BuyLevelUp"
    },
    KinAuctionRedPoint = {},
    RealNameAuth = {},
    ExpUpRedPoint = {},
    MarketStallTab = {
      "MarketStallMine"
    },
    GameCommunity = {
      "Restaurant",
      "QQBuluo",
      "WxCircle",
      "XinyueVip",
      "MicroMainPage",
      "XMFacebook"
    },
    Activity_WLDH = {}
  },
  BtnTopFold_Battle = {
    "ItemBox_Battle"
  },
  BtnFold = {
    Shop = {
      RechargeTab = {
        VipAward = {
          "VipAward0",
          "VipAward1",
          "VipAward2",
          "VipAward3",
          "VipAward4",
          "VipAward5",
          "VipAward6",
          "VipAward7",
          "VipAward8",
          "VipAward9",
          "VipAward10",
          "VipAward11",
          "VipAward12",
          "VipAward13",
          "VipAward14",
          "VipAward15",
          "VipAward16"
        }
      },
      CommonShopTab = {}
    },
    HonorLevel = {
      "TitleUpgrade"
    },
    Skill = {
      SkillPublicRed = {
        "SkillPublicBook1",
        "SkillPublicBook2",
        "SkillPublicBook3",
        "SkillPublicBook4"
      }
    },
    Partner = {
      PartnerMainPanel = {},
      PartnerGralleryPanel = {
        "PartnerExtAttrib"
      },
      PartnerCardPickPanel = {}
    },
    Relation = {
      Friend = {
        "Friend_Request"
      },
      Enemy = {"Wanted"},
      TeacherStudent = {
        "TS_Applylist",
        "TS_Teacher1",
        "TS_Teacher2"
      }
    },
    KinTopButton = {
      KinBuilding = {
        KinGiftBoxRedPoint = {
          "KinGiftGain"
        },
        KinStoreRedPoint = {}
      },
      KinTabMember = {
        "KinRedBagNotify"
      }
    }
  },
  RoleHead = {
    "Achievement_Btn"
  },
  ChatSetting = {
    Theme = {},
    ChatSettingDetail = {
      "ChatNamePrefix"
    }
  },
  CalendarGuide = {
    "NG_Boss",
    "NG_CommerceTask",
    "NG_Battle",
    "NG_CangBaoTu",
    "NG_PunishTask",
    "NG_TeamFuben",
    "NG_ExplorationFuben",
    "NG_Rank",
    "NG_RandomFuben",
    "NG_FieldBoss",
    "NG_FieldLeader",
    "NG_ActivityQuestion",
    "NG_ChuanGong",
    "NG_KinGather",
    "NG_AdventureFuben",
    "NG_HeroChallenge",
    "NG_KinBattle",
    "NG_WhiteTigerFuben",
    "NG_TeamBattle",
    "NG_FactionBattle",
    "NG_KinEscort",
    "NG_XiuLian",
    "NG_KinFuben",
    "NG_SeriesFuben",
    "NG_ImperialTomb",
    "NG_ImperialTombEmperor",
    "NG_InDifferBattle",
    NG_EverydayTarget = {
      "NG_EverydayTarget_First",
      "NG_EverydayTarget_Preview"
    }
  },
  ActivityGuide = {
    "NG_MoneyTreePanel",
    "NG_SignInAwards",
    "NG_GrowInvest",
    "NG_RechargeGift",
    "NG_DailyRechargeGift"
  },
  NG_ZhuangXiu = {},
  KinGuide = {
    NG_KinJoin = {},
    NG_Kin = {
      NG_KinBuilding = {
        NG_ZhuDian = {
          "NG_KinBuildUpgrade"
        }
      }
    }
  },
  NG_PkMode = {},
  FubenGuide = {
    "NG_Jingying"
  },
  MiniMapGuide = {
    "NG_WorldMap"
  },
  HouseGuide = {"NG_BtnHome"},
  PartnerGuide = {
    FreePickGuide = {
      "NG_PickCard"
    },
    NG_Partner = {}
  },
  SkillGuide = {
    "NG_SkillUpGrade"
  },
  AutoFightGuide = {
    "NG_AutoFightSettingGuide",
    "NG_AutoFightGuide"
  },
  RelationGuide = {"NG_Enemy"},
  Fuben = {
    "Main_1_1",
    "Main_1_2",
    "Main_1_3",
    "Main_1_4",
    "Main_1_5",
    "Main_1_6",
    "Main_2_1",
    "Main_2_2",
    "Main_2_3",
    "Main_2_4",
    "Main_2_5",
    "Main_2_6"
  },
  TeamNewApplyer = {
    "TeamNewApplyer"
  },
  MyAuction = {"MyAuction"},
  TeamNewInvitor = {
    "TeamNewInvitor"
  },
  TeamBtnNew = {"TeamBtnNew"},
  KinTabMember2 = {
    "KinMemberRedPoint"
  },
  NG_MountGuide = {},
  ChanfeName = {
    "ChanfeNameInfo",
    "NG_BindingMailGuideAndroid"
  },
  Task = {
    "ValueCompose"
  },
  Feedback = {},
  IndifferMapRed = {},
  House = {
    Room = {"Muse"}
  },
  RoomerHouse = {
    Room = {"Muse"}
  },
  PlantHelpCure = {},
  PlantHelpCure_Land = {},
  Wedding_BtnInvitation = {
    "Wedding_ApplyWelcome"
  },
  ItemBox_HomeScreeFuben = {}
}
function Ui:InitRedPointTree()
  self.tbRedPoint = {}
  for szPoint, tbNode in pairs(self.tbRedPointSetting) do
    self:InitRedPointNode(szPoint, tbNode)
  end
end
function Ui:InitRedPointNode(szPoint, tbNode, szParent)
  self.tbRedPoint[szPoint] = self.tbRedPoint[szPoint] or {bActive = false, nChildrenActive = 0}
  if szParent then
    self.tbRedPoint[szPoint].tbParent = self.tbRedPoint[szPoint].tbParent or {}
    table.insert(self.tbRedPoint[szPoint].tbParent, szParent)
  end
  if type(tbNode) ~= "table" then
    return
  end
  for varKey, varValue in pairs(tbNode) do
    if type(varValue) == "string" then
      self:InitRedPointNode(varValue, nil, szPoint)
    elseif type(varValue) == "table" then
      self:InitRedPointNode(varKey, varValue, szPoint)
    end
  end
end
Ui:InitRedPointTree()
function Ui:RegisterRedPoint(nRedPoinId, szPoint)
  if self.tbRedPoint[szPoint] then
    if self.tbRedPoint[szPoint].nRedPoinId then
      Log(szPoint, debug.traceback())
    end
    self.tbRedPoint[szPoint].nRedPoinId = nRedPoinId
    self:CheckRedPoint(szPoint)
  else
    Ui.UiManager.SetRedPointActive(nRedPoinId, false)
  end
end
function Ui:UnRegisterRedPoint(szPoint)
  if self.tbRedPoint[szPoint] then
    self.tbRedPoint[szPoint].nRedPoinId = nil
  end
end
function Ui:CheckRedPoint(szPoint)
  if self.tbRedPoint[szPoint] and self.tbRedPoint[szPoint].nRedPoinId then
    Ui.UiManager.SetRedPointActive(self.tbRedPoint[szPoint].nRedPoinId, self.tbRedPoint[szPoint].bActive)
  end
end
function Ui:SetRedPointNotify(szPoint, bChildrenNotice)
  if self.tbRedPoint[szPoint] then
    if bChildrenNotice then
      self.tbRedPoint[szPoint].nChildrenActive = self.tbRedPoint[szPoint].nChildrenActive + 1
    end
    if self.tbRedPoint[szPoint].bActive ~= true then
      self.tbRedPoint[szPoint].bActive = true
      self:CheckRedPoint(szPoint)
      for _, szParent in ipairs(self.tbRedPoint[szPoint].tbParent or {}) do
        self:SetRedPointNotify(szParent, true)
      end
    end
  end
end
function Ui:ClearRedPointNotify(szPoint, bChildrenNotice)
  if self.tbRedPoint[szPoint] then
    if bChildrenNotice then
      self.tbRedPoint[szPoint].nChildrenActive = math.max(0, self.tbRedPoint[szPoint].nChildrenActive - 1)
      if self.tbRedPoint[szPoint].nChildrenActive > 0 then
        return
      end
    end
    if self.tbRedPoint[szPoint].bActive ~= false then
      self.tbRedPoint[szPoint].bActive = false
      self:CheckRedPoint(szPoint)
      for _, szParent in ipairs(self.tbRedPoint[szPoint].tbParent or {}) do
        self:ClearRedPointNotify(szParent, true)
      end
    end
    Sdk:ClearCommunityRedPoint(szPoint)
  end
end
function Ui:GetRedPointState(szPoint)
  if self.tbRedPoint[szPoint] then
    return self.tbRedPoint[szPoint].bActive
  end
end
